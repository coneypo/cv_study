<!DOCTYPE html>
<html lang="en">
<head>
<!-- HTML header for doxygen 1.8.12 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Intel® Movidius™ VPUs Programming Guide for Use with Intel® Distribution of OpenVINO™ toolkit - OpenVINO Toolkit</title>
<script type="text/javascript" src="jquery.js?v=061b82a77ebb139b894ce81faa5ba1f6"></script>
<script type="text/javascript" src="dynsections.js?v=061b82a77ebb139b894ce81faa5ba1f6"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../assets/versions_raw.js?v=061b82a77ebb139b894ce81faa5ba1f6"></script>
<script type="text/javascript" src="../assets/openvino-versions.js?v=061b82a77ebb139b894ce81faa5ba1f6"></script>
<script type="text/javascript" src="openvino-layout.js?v=061b82a77ebb139b894ce81faa5ba1f6"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
  <div id="projectalign">
   <div id="projectname"><a href="<domain_placeholder>" class="homelink-id">OpenVINO Toolkit</a></div>
  </div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js?v=e23bd1c8e92f867d90ca8af9d83669a3"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Intel® Movidius™ VPUs Programming Guide for Use with Intel® Distribution of OpenVINO™ toolkit </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>See Also</h2>
<ul>
<li><a class="el" href="_docs_install_guides_movidius_setup_guide.html">Intel® Movidius™ VPUs Setup Guide for use with the Intel® Distribution of OpenVINO™</a></li>
<li><a href="&lt;domain_placeholder&gt;/downloads/595850_Intel_Vision_Accelerator_Design_with_Intel_Movidius™_VPUs-HAL Configuration Guide_rev1.3.pdf" class="download">Intel® Vision Accelerator Design with Intel® Movidius™ VPUs HAL Configuration Guide</a></li>
<li><a href="&lt;domain_placeholder&gt;/downloads/613514_Intel Vision Accelerator Design with Intel Movidius™ VPUs Workload Distribution_UG_r0.9.pdf" class="download">Intel® Vision Accelerator Design with Intel® Movidius™ VPUs Workload Distribution User Guide</a></li>
<li><a href="&lt;domain_placeholder&gt;/downloads/613759_Intel Vision Accelerator Design with Intel Movidius™ VPUs Scheduler_UG_r0.9.pdf" class="download">Intel® Vision Accelerator Design with Intel® Movidius™ VPUs Scheduler User Guide</a></li>
<li><a href="&lt;domain_placeholder&gt;/downloads/Intel Vision Accelerator Design with Intel Movidius™ VPUs Errata.pdf" class="download">Intel® Vision Accelerator Design with Intel® Movidius™ VPUs Errata</a></li>
</ul>
<p>The following section provides information on how to distribute a model across all 8 VPUs to maximize performance.</p>
<h2>Programming a C++ Application for the Accelerator</h2>
<h3>Declare a Structure to Track Requests</h3>
<p>The structure should hold:</p><ol type="1">
<li>A pointer to an inference request.</li>
<li>An ID to keep track of the request. <div class="fragment"><div class="line"><span class="keyword">struct </span>Request {</div><div class="line">    <a class="code" href="classInferenceEngine_1_1InferRequest.html#aa725364c5565a1cbe4d0e9245a4cb055">InferenceEngine::InferRequest::Ptr</a> inferRequest;</div><div class="line">    <span class="keywordtype">int</span> frameidx;</div><div class="line">};</div></div><!-- fragment --></li>
</ol>
<h3>Declare a Vector of Requests</h3>
<div class="fragment"><div class="line"><span class="comment">// numRequests is the number of frames (max size, equal to the number of VPUs in use)</span></div><div class="line">vector&lt;Request&gt; request(numRequests);</div></div><!-- fragment --><p>Declare and initialize 2 mutex variables:</p><ol type="1">
<li>For each request</li>
<li>For when all 8 requests are done</li>
</ol>
<h3>Declare a Conditional Variable (indicates when at most 8 requests are done at a time)</h3>
<p>For inference requests, use the asynchronous IE API calls:</p>
<div class="fragment"><div class="line"><span class="comment">// initialize infer request pointer – Consult IE API for more detail.</span></div><div class="line">request[i].inferRequest = executable_network.CreateInferRequestPtr();</div></div><!-- fragment --><div class="fragment"><div class="line"><span class="comment">// Run inference</span></div><div class="line">request[i].inferRequest-&gt;StartAsync();</div></div><!-- fragment --><h3>Create a Lambda Function (for the parsing and display of results)</h3>
<p>Inside the Lambda body use the completion callback function:</p>
<div class="fragment"><div class="line">request[i].inferRequest-&gt;SetCompletionCallback</div><div class="line">(nferenceEngine::IInferRequest::Ptr context)</div></div><!-- fragment --><h2>Additional Resources</h2>
<ul>
<li><a href="https://software.intel.com/en-us/openvino-toolkit">Intel Distribution of OpenVINO Toolkit home page</a></li>
<li><a href="https://docs.openvinotoolkit.org">Intel Distribution of OpenVINO Toolkit documentation</a> </li>
</ul>
</div></div><!-- contents -->
  <div class="footer">
  <div id="nav-path" class="navpath"></div>
  <div class="footer-content">
    <div class="footer-column">
      <h4>Support</h4>
      <ul>
        <li>
          <a href="https://software.intel.com/en-us/forums/computer-vision">Intel Developer Zone Forum for Intel Distribution of OpenVINO Toolkit</a></li>
      </ul>
    </div>
  </div>
  <div class="copyright">
    <p>Documentation for OpenVINO Toolkit.<br/>
    For more complete information about compiler optimizations, see our <a href="/<version_placeholder>/_docs_IE_DG_Optimization_notice.html">Optimization Notice</a></p>
  </div>
</div>
</body>
</html>