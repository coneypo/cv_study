<!DOCTYPE html>
<html lang="en">
<head>
<!-- HTML header for doxygen 1.8.12 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cross Check Tool - OpenVINO Toolkit</title>
<script type="text/javascript" src="jquery.js?v=061b82a77ebb139b894ce81faa5ba1f6"></script>
<script type="text/javascript" src="dynsections.js?v=061b82a77ebb139b894ce81faa5ba1f6"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../assets/versions_raw.js?v=061b82a77ebb139b894ce81faa5ba1f6"></script>
<script type="text/javascript" src="../assets/openvino-versions.js?v=061b82a77ebb139b894ce81faa5ba1f6"></script>
<script type="text/javascript" src="openvino-layout.js?v=061b82a77ebb139b894ce81faa5ba1f6"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
  <div id="projectalign">
   <div id="projectname"><a href="<domain_placeholder>" class="homelink-id">OpenVINO Toolkit</a></div>
  </div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js?v=e23bd1c8e92f867d90ca8af9d83669a3"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Cross Check Tool </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Cross Check Tool is a console application that enables comparing accuracy and performance metrics for two successive model inferences that are performed on two different supported Intel&reg; devices or with different precisions. The Cross Check Tool can compare metrics per layer or all over the model.</p>
<p>On Linux* OS, before running the Cross Check Tool binary, make sure your application can find the Deep Learning Inference Engine libraries. Navigate to the <code>&lt;INSTALL_DIR&gt;/deployment_tools/inference_engine/bin</code> folder and run the <code>setvars.sh</code> script to set all necessary environment variables:</p>
<div class="fragment"><div class="line">source setvars.sh</div></div><!-- fragment --><h2>Running the Cross Check Tool</h2>
<p>Cross Check Tool is distributed as a binary file and there is no need to build it. To run the Cross Check Tool, execute the tool's binary file with necessary parameters. Please note that the Inference Engine assumes that weights are in the same folder as the _.xml_ file.</p>
<p>You can get the list of all available options using the -h option:</p>
<div class="fragment"><div class="line">$./cross_check_tool -h</div><div class="line">InferenceEngine:</div><div class="line">  API version ............ 1.0</div><div class="line">  Build .................. ###</div><div class="line">[ INFO ] Parsing input parameters</div><div class="line"></div><div class="line">./cross_check_tool [OPTION]</div><div class="line">Options:</div><div class="line"></div><div class="line">    -h                     Prints a usage message.</div><div class="line">    -i &quot;&lt;path&gt;&quot;            Optional. Path to an input image file or multi-input file to infer. Generates input(s) from normal distribution if empty</div><div class="line">    -m &quot;&lt;path&gt;&quot;            Required. Path to an .xml file that represents the first IR of the trained model to infer.</div><div class="line">      -l &quot;&lt;absolute_path&gt;&quot; Required for MKLDNN (CPU)-targeted custom layers. Absolute path to a shared library with the kernels implementation.</div><div class="line">          Or</div><div class="line">      -c &quot;&lt;absolute_path&gt;&quot; Required for clDNN (GPU)-targeted custom kernels. Absolute path to the xml file with the kernels description.</div><div class="line">    -conf &quot;&lt;path&gt;&quot;         Optional. Path to config file for -d device plugin</div><div class="line">    -ref_conf &quot;&lt;path&gt;&quot;     Optional. Path to config file for -ref_d device plugin</div><div class="line">    -pp &quot;&lt;path&gt;&quot;           Optional. Path to a plugin folder.</div><div class="line">    -d &quot;&lt;device&gt;&quot;          Required. The first target device to infer the model specified with the -m option. CPU, GPU, HDDL or MYRIAD is acceptable.</div><div class="line">    -ref_m &quot;&lt;path&gt;&quot;        Optional. Path to an .xml file that represents the second IR in different precision to compare the metrics.</div><div class="line">    -ref_d &quot;&lt;device&gt;&quot;      Required. The second target device to infer the model and compare the metrics. CPU, GPU, HDDL or MYRIAD is acceptable.</div><div class="line">    -layers &quot;&lt;options&gt;&quot;    Defines layers to check. Options: all, None - for output layers check, list of comma-separated layer names to check. Default value is None.</div><div class="line">    -eps &quot;&lt;float&gt;&quot;         Optional. Threshold for filtering out those blob statistics that do not statify the condition: max_abs_diff &lt; eps.</div><div class="line">    -dump                  Enables blobs statistics dumping</div><div class="line">    -load &quot;&lt;path&gt;&quot;         Path to a file to load blobs from</div></div><!-- fragment --> <h3>Examples</h3>
<ol type="1">
<li>To check per-layer accuracy and performance of inference in FP32 precision on the CPU against the GPU, run: <div class="fragment"><div class="line">./cross_check_tool -i &lt;path_to_input_image_or_multi_input_file&gt; \</div><div class="line">                   -m &lt;path_to_FP32_xml&gt;    \</div><div class="line">                   -d CPU                   \</div><div class="line">                   -ref_d GPU               \</div><div class="line">                   -layers all</div></div><!-- fragment --> The output looks as follows: <div class="fragment"><div class="line">InferenceEngine:</div><div class="line">  API version ............ 1.0</div><div class="line">  Build .................. ###</div><div class="line">[ INFO ] Parsing input parameters</div><div class="line">    The same IR on both devices: &lt;path_to_IR&gt;</div><div class="line"></div><div class="line">[ INFO ] No extensions provided</div><div class="line"></div><div class="line">  API version ............ 1.0</div><div class="line">  Build .................. lnx_20180510</div><div class="line">  Description ....... MKLDNNPlugin</div><div class="line"></div><div class="line">  API version ............ 0.1</div><div class="line">  Build .................. ci-main-03659</div><div class="line">  Description ....... clDNNPlugin</div><div class="line">[ INFO ] Inputs detected: Placeholder</div><div class="line">[ INFO ] Statistics will be dumped for X layers: &lt;layer_1_name&gt;, &lt;layer_2_name&gt;, ... , &lt;layer_X_name&gt;</div><div class="line">[ INFO ] Layer &lt;layer_1_name&gt; statistics</div><div class="line">    Max absolute difference: 1.52588e-05</div><div class="line">    Min absolute difference: 0</div><div class="line">    Max relative difference: 0.000288028%</div><div class="line">    Min relative difference: 0%</div><div class="line">                  Blob size: 1000</div><div class="line"></div><div class="line">                    Devices:            CPU_FP32            GPU_FP32</div><div class="line">                     Status:            EXECUTED            EXECUTED</div><div class="line">                 Layer type:             Reshape             Reshape</div><div class="line">        Real time, microsec:                  20                 154</div><div class="line">             Execution type:             unknown                 GPU</div><div class="line">              Number of NAN:                   0                   0</div><div class="line">              Number of INF:                   0                   0</div><div class="line">             Number of ZERO:                   0                   0</div><div class="line">...</div><div class="line">&lt;list_of_layer_statistics&gt;</div><div class="line">...</div><div class="line"></div><div class="line">[ INFO ] Overall max absolute difference 2.81334e-05 was reached by &lt;layer_name&gt; layer</div><div class="line">[ INFO ] Overall min absolute difference 0 was reached by &lt;layer_name&gt; layer</div><div class="line">[ INFO ] Overall max relative difference 0.744893% was reached by &lt;layer_name&gt; layer</div><div class="line">[ INFO ] Overall min relative difference -2.47948% was reached by &lt;layer_name&gt; layer</div><div class="line">[ INFO ] Execution successful</div></div><!-- fragment --></li>
<li>To check the overall accuracy and performance of inference on the CPU in FP32 precision against the Intel&reg; Movidius&trade; Myriad&trade; device in FP16 precision, run: <div class="fragment"><div class="line">./cross_check_tool -i &lt;path_to_input_image_or_multi_input_file&gt; \</div><div class="line">                   -m &lt;path_to_FP16_xml&gt;    \</div><div class="line">                   -ref_d CPU               \</div><div class="line">                   -ref_m &lt;path_to_FP32_xml&gt;\</div><div class="line">                   -d MYRIAD                \</div></div><!-- fragment --> The output looks as follows: <div class="fragment"><div class="line">InferenceEngine:</div><div class="line">  API version ............ 1.0</div><div class="line">  Build .................. ###</div><div class="line"></div><div class="line">[ INFO ] Parsing input parameters</div><div class="line">[ INFO ] MYRIAD vs CPU</div><div class="line">    IR for MYRIAD : &lt;path_to_FP16_xml&gt;</div><div class="line">    IR for CPU : &lt;path_to_FP32_xml&gt;</div><div class="line"></div><div class="line">[ INFO ] No extensions provided</div><div class="line">[ INFO ] Loading plugins</div><div class="line"></div><div class="line">  API version ............ 0.1</div><div class="line">  Build .................. ###</div><div class="line">  Description ....... myriadPlugin</div><div class="line"></div><div class="line"></div><div class="line">  API version ............ 1.0</div><div class="line">  Build .................. ###</div><div class="line">  Description ....... MKLDNNPlugin</div><div class="line"></div><div class="line">[ INFO ] Inputs detected: &lt;list_of_input_layers&gt;</div><div class="line">[ INFO ] Statistics will be dumped for 1 layers: &lt;output_layer_name(s)&gt;</div><div class="line">[ INFO ] Layer &lt;output_layer_name&gt; statistics</div><div class="line">    Max absolute difference: 0.003889</div><div class="line">    Min absolute difference: 2.49778e-12</div><div class="line">    Max relative difference: 290.98%</div><div class="line">    Min relative difference: 0.0327804%</div><div class="line">                    Devices:         MYRIAD_FP16            CPU_FP32</div><div class="line">        Real time, microsec:        69213.978946         4149.904940</div><div class="line">[ INFO ] Execution successful</div></div><!-- fragment --></li>
<li>To dump layer statistics from specific list of layers, run: <div class="fragment"><div class="line">./cross_check_tool -i &lt;path_to_input_image_or_multi_input_file&gt; \</div><div class="line">                   -m &lt;path_to_FP16_xml&gt;                        \</div><div class="line">                   -d MYRIAD                                    \</div><div class="line">                   -dump                                        \</div><div class="line">                   -layers &lt;comma_separated_list_of_layers&gt;</div></div><!-- fragment --> The output looks as follows: <div class="fragment"><div class="line">InferenceEngine:</div><div class="line">  API version ............ 1.0</div><div class="line">  Build .................. ###</div><div class="line">[ INFO ] Blob and statistics dumping enabled</div><div class="line">[ INFO ] No extensions provided</div><div class="line"></div><div class="line">  API version ............ 0.1</div><div class="line">  Build .................. custom_releases/cvsdk-2018-r2_e28ec0278fb749d6b999c688a8e90a8a25c0f2b5</div><div class="line">  Description ....... myriadPlugin</div><div class="line"></div><div class="line">[ INFO ] Inputs detected: &lt;list_of_input_layers&gt;</div><div class="line">[ INFO ] Statistics will be dumped for X layers: &lt;comma_separated_list_of_layers&gt;</div><div class="line">[ INFO ] Dump path: &lt;path_where_dump_will_be_saved&gt;</div><div class="line">[ INFO ] &lt;layer_1_name&gt; layer processing</div><div class="line">...</div><div class="line">[ INFO ] &lt;layer_X_name&gt; layer processing</div><div class="line">[ INFO ] Execution successful</div></div><!-- fragment --> If you do not provide the <code>-i</code> key, the Cross Check Tool generates an input from normal distributed noise and saves it in a multi-input file format with the filename <code>&lt;path_to_xml&gt;_input_layers_dump.txt</code> in the same folder as the IR.</li>
<li>To check the overall accuracy and performance of inference on the CPU in FP32 precision against dumped results, run: <div class="fragment"><div class="line">./cross_check_tool -i &lt;path_to_input_image_or_multi_input_file&gt; \</div><div class="line">                   -m &lt;path_to_FP32_xml&gt;                        \</div><div class="line">                   -d CPU                                       \</div><div class="line">                   -load &lt;path_to_dump&gt;                         \</div><div class="line">                   -layers all</div></div><!-- fragment --> The output looks as follows: <div class="fragment"><div class="line">InferenceEngine:</div><div class="line">  API version ............ 1.0</div><div class="line">  Build .................. ###</div><div class="line">[ INFO ] Blob and statistics loading enabled. File /localdisk/models/FP16/icv_squeezenet_v1.0_MYRIAD_FP16_dump.txt</div><div class="line">    The same IR on both devices: &lt;path_to_FP32_xml&gt;   </div><div class="line"></div><div class="line">[ INFO ] No extensions provided</div><div class="line"></div><div class="line">  API version ............ 0.1</div><div class="line">  Build .................. ###</div><div class="line">  Description ....... myriadPlugin</div><div class="line"></div><div class="line">[ INFO ] Inputs detected: &lt;list_of_input_layers&gt;</div><div class="line">[ INFO ] Statistics will be dumped for X layers: &lt;layer_1_name&gt;, &lt;layer_2_name&gt;, ... , &lt;layer_X_name&gt;</div><div class="line">[ INFO ] &lt;layer_1_name&gt; layer processing</div><div class="line">[ INFO ] Layer &lt;layer_1_name&gt; statistics</div><div class="line">    Max absolute difference: 0</div><div class="line">    Min absolute difference: 0</div><div class="line">    Max relative difference: 0%</div><div class="line">    Min relative difference: 0%</div><div class="line">                  Blob size: 1000</div><div class="line"></div><div class="line">                    Devices:         MYRIAD_FP16  MYRIAD_FP16_loaded</div><div class="line">                     Status:            EXECUTED            EXECUTED</div><div class="line">                 Layer type:             SoftMax             SoftMax</div><div class="line">        Real time, microsec:                  43                  43</div><div class="line">             Execution type:             SoftMax             SoftMax</div><div class="line">              Number of NAN:                   0                   0</div><div class="line">              Number of INF:                   0                   0</div><div class="line">             Number of ZERO:                   0                   0</div><div class="line">...</div><div class="line">&lt;list_of_layer_statistics&gt;</div><div class="line">...</div><div class="line">[ INFO ] Overall max absolute difference 0</div><div class="line">[ INFO ] Overall min absolute difference 0 was reached by &lt;layer_1_name&gt; layer</div><div class="line">[ INFO ] Overall max relative difference 0%</div><div class="line">[ INFO ] Overall min relative difference 0% was reached by &lt;layer_1_name&gt; layer</div><div class="line">[ INFO ] Execution successful</div></div><!-- fragment --></li>
</ol>
<h3>Multi-input and dump file experimental format</h3>
<p>Text file contains description of each layer in structure like this:</p><ul>
<li>1<sup>st</sup> line is layer name (required)</li>
<li>2<sup>nd</sup> line is shape like "(1,224,224,3)" (required)</li>
<li>3<sup>rd</sup> line is a device and precision information like "CPU_FP32" (optional for multi-input file)</li>
<li>4<sup>th</sup> line is execution status Options are: EXECUTED, OPTIMIZED_OUT (optional for multi-input file)</li>
<li>5<sup>th</sup> line is type of layer (optional for multi-input file)</li>
<li>6<sup>th</sup> line is execution time in microseconds (optional for multi-input file)</li>
<li>7<sup>th</sup> line is type of execution (optional for multi-input file)</li>
<li>8<sup>th</sup> line is word "CONTENT" which means that the next line or lines are consisted of blob elements</li>
<li>Next line or lines are for blob elements. They may be separated with one or several spaces, tabs and new lines.</li>
</ul>
<h4>Multi-input file example</h4>
<div class="fragment"><div class="line">Input_1</div><div class="line">(1,10)</div><div class="line">CONTENT</div><div class="line">0 0.000628471375 0.00185108185</div><div class="line">0.000580787659</div><div class="line">0.00137138367</div><div class="line">0.000561237335 0.0040473938 0 0 0</div><div class="line">Input_2</div><div class="line">(1,8)</div><div class="line">CONTENT</div><div class="line">0 0 0.00194549561 0.0017490387 7.73072243e-05 0.000135779381 0.000186920166 0 7.52806664e-05</div></div><!-- fragment --><h4>Dump file example</h4>
<div class="fragment"><div class="line">Softmax</div><div class="line">(1,10)</div><div class="line">MYRIAD_FP16</div><div class="line">EXECUTED</div><div class="line">SoftMax</div><div class="line">43</div><div class="line">SoftMax</div><div class="line">CONTENT</div><div class="line">7.44462013e-05</div><div class="line">0</div><div class="line">0.000810623169</div><div class="line">0.000361680984</div><div class="line">0</div><div class="line">9.14335251e-05</div><div class="line">0</div><div class="line">0</div><div class="line">8.15987587e-05</div><div class="line">0</div></div><!-- fragment --><h3>Configuration file</h3>
<p>There is an option to pass configuration file to plugin by providing <code>-conf</code> and/or <code>--ref_conf</code> keys.</p>
<p>Configuration file is a text file with content of pairs of keys and values.</p>
<p>Structure of configuration file:</p>
<div class="fragment"><div class="line">KEY VALUE</div><div class="line">ANOTHER_KEY ANOTHER_VALUE,VALUE_1</div></div><!-- fragment --> </div></div><!-- contents -->
  <div class="footer">
  <div id="nav-path" class="navpath"></div>
  <div class="footer-content">
    <div class="footer-column">
      <h4>Support</h4>
      <ul>
        <li>
          <a href="https://software.intel.com/en-us/forums/computer-vision">Intel Developer Zone Forum for Intel Distribution of OpenVINO Toolkit</a></li>
      </ul>
    </div>
  </div>
  <div class="copyright">
    <p>Documentation for OpenVINO Toolkit.<br/>
    For more complete information about compiler optimizations, see our <a href="/<version_placeholder>/_docs_IE_DG_Optimization_notice.html">Optimization Notice</a></p>
  </div>
</div>
</body>
</html>